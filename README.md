# Introduction
This code is an application of palabos for the simulation of a porous airfoil. 


## Palabos 
*From the Palabos code README:*

[Palabos](https://palabos.unige.ch/) is an open-source CFD solver based on the [lattice Boltzmann method](https://palabos.unige.ch/lattice-boltzmann/what-lattice-boltzmann/). 
On this page you can download the source code, [access examples](https://gitlab.com/unigespc/palabos/tree/master/examples) and resources, 
and [interact with the user base](http://palabos-forum.unige.ch/).


# Installation
The installation of this code works similarily to the installation of Palabos.
Palabos is very easy to install since it does not depend on any external dependencies.

## Linux Prerequisites

The mandatory packages are the following:

- A modern C++ compiler `gcc` or `clang`
- `clang-format` version 14
- `make`
- `cmake`

### For Debian based distributions

```
$ sudo apt install gcc clang clang-format cmake make
```

### For Arch based distributions

```
$ sudo pacman -S gcc clang make cmake
```

## Linux MANDATORY prerequisites


- [openmpi](https://www.open-mpi.org/), by default all the examples use MPI.
- [imagemagick](https://imagemagick.org/index.php), some examples output `.gif` which are generated by calling `convert`.
- [hdf5](https://www.hdfgroup.org) for the use of hdf5 output.
- [ccache](https://ccache.dev/) to speed up the compilation process.

### For Debian based distributions

```
$ sudo apt install libopenmpi-dev imagemagick libhdf5-dev libhdf5-mpi-dev ccache
```

### For Arch based distributions

```
$ sudo pacman -S openmpi imagemagick hdf5 hdf5-openmpi ccache
```
  
The majority of the output of Palabos is under the form of `VTK` files. We recommend the use
of [Paraview](https://www.paraview.org/) for their visualization.

## Windows Prerequisites

- Microsoft Visual Studio (VS). VS2019 is recommended, due to its integration with CMake project management.
- Microsoft C++ compiler, installed with Visual Studio (make sure to enable the installation of C++ compiler in the custom installation option of VS). This step can be done even after installing VS for the first time in your system. Simply, re-run the installer and customize it to include the extra features. For more information on how to install C/C++ support in Visual Studio follow [link1](https://docs.microsoft.com/en-us/cpp/build/vscpp-step-0-installation?view=vs-2019) & [link2](https://visualstudio.microsoft.com/vs/features/cplusplus/).
- Optionally the Microsoft Message Passing Interface (MPI). To install MPI follow this [link](https://docs.microsoft.com/en-us/message-passing-interface/microsoft-mpi).
- Optionally the [HDF5](https://www.hdfgroup.org/downloads/hdf5/) library.
- If you use Visual Studio older than VS2019, you may want to install [CMake](https://cmake.org/download/), preferably the latest version, to generate a Visual Studio project file (.sln) from Palabos' CMakeLists.txt

## The installation steps

# Cloning this repository

# Compile the airfoil


Once you have an installation we assume that you are located in your Palabos
installation directory (see above).

```
$ cd airfoil/main/build/
$ cmake ..
$ make -j
$ cd ..
```

These commands should generate the `airfoil` executable.
If you have a functioning MPI installation you can run it on 4 cores for example
using the command

```
$ mpirun -np 4 ./airfoil parameters.xml
```

